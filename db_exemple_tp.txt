CREATE DATABASE magasin;
CREATE TABLE  `magasin`.`client` (
 `id_client` MEDIUMINT UNSIGNED NOT NULL AUTO_INCREMENT ,
 `nom` VARCHAR( 30 ) NOT NULL ,
 `prenom` VARCHAR( 30 ) NOT NULL ,
 `adresse` VARCHAR( 60 ) NOT NULL ,
 `mail` VARCHAR( 50 ) NULL DEFAULT  'pas de mail',
PRIMARY KEY (  `id_client` )
);

CREATE TABLE `magasin`.`commande` (
`id_comm` mediumint( 8 ) unsigned NOT NULL AUTO_INCREMENT ,
`id_client` mediumint( 8 ) unsigned NOT NULL ,
`date` date NOT NULL ,
PRIMARY KEY ( `id_comm` , `id_client` ) ,
FOREIGN KEY (id_client)
REFERENCES client(id_client)
);

CREATE TABLE `magasin`.`article` (
`id_article` CHAR( 5 ) NOT NULL ,
`designation` VARCHAR( 100 ) NOT NULL ,
`prix` DECIMAL( 8, 2 ) NOT NULL ,
`categorie` ENUM( 'tous', 'photo', 'vidéo', 'informatique', 'divers' ) NOT NULL
DEFAULT 'tous',
PRIMARY KEY ( `id_article` )
);

CREATE TABLE `magasin`.`ligne` (
`id_comm` mediumint( 8 ) unsigned NOT NULL ,
`id_article` CHAR( 5 ) NOT NULL,
`quantite` TINYINT UNSIGNED NOT NULL,
`prix_unit` DECIMAL( 8, 2 ) NOT NULL,
PRIMARY KEY ( `id_comm` , `id_article` ),
FOREIGN KEY (id_comm) REFERENCES commande(id_comm),
FOREIGN KEY (id_article) REFERENCES article(id_article)
);
